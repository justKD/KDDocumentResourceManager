class KDDocumentResourceManager{constructor(e,s){const t={scripts:"object"==typeof e.scripts?e.scripts:null,stylesheets:"object"==typeof e.stylesheets?e.stylesheets:null,styles:"object"==typeof e.styles?e.styles:null,callback:s},c={scripts:{ready:!1,readyStates:{}},css:{ready:!1,readyStates:{}}};let a=0;const r=e=>{const s={isReady:e=>{let s=0;return Object.values(c.scripts.readyStates).forEach(t=>t?e:s++),0==s},addScript:(e,t)=>{const a=document.createElement("script");a.id=t,a.src=e,a.onload=(e=>{c.scripts.readyStates[t]=!0,s.isReady()&&(c.scripts.ready=!0)}),document.body.appendChild(a)}};Object.keys(e).forEach(e=>c.scripts.readyStates[e]=!1),Object.keys(e).forEach(c=>{document.getElementById(c)||s.addScript(e[c],c),t.scripts[c]||(t.scripts[c]=e[c])})},l=e=>{const s={isReady:e=>{let s=0;return Object.values(c.css.readyStates).forEach(t=>t?e:s++),0==s},addLink:(e,t)=>{const a=document.createElement("link");a.id=t,a.rel="stylesheet",a.href=e,a.onload=(e=>{c.css.readyStates[t]=!0,s.isReady()&&(c.css.ready=!0)}),document.head.appendChild(a)}};Object.keys(e).forEach(e=>c.css.readyStates[e]=!1),Object.keys(e).forEach(c=>{document.getElementById(c)||s.addLink(e[c],c),t.stylesheets[c]||(t.stylesheets[c]=e[c])})},d=e=>{const s={styles:e.styles?e.styles:null,cssStrings:{},css:"",createStyleString:e=>{let s=" {";return Object.keys(e).forEach(t=>s+=t+": "+e[t]+";"),s+="}"},addStyles:e=>{const t=document.createElement("style");t.id="KDDocumentResourceManager--Styles",t.appendChild(document.createTextNode(s.css)),document.head.appendChild(t)}};s.styles&&Object.keys(s.styles).forEach(e=>{const t=Object.values(s.styles[e]);"string"==typeof t[0]?s.cssStrings[e]=e+s.createStyleString(s.styles[e]):"object"==typeof t[0]&&(s.cssStrings[e]=e+" {",Object.keys(s.styles[e]).forEach(t=>s.cssStrings[e]+=t+s.createStyleString(s.styles[e][t])),s.cssStrings[e]+="}")}),Object.values(s.cssStrings).forEach(e=>s.css+=e),s.addStyles()},y=e=>{t.callback=e,n.readyCheckAndCallback()},n={readyCheckAndCallback:e=>{c.scripts.ready&&c.css.ready?t.callback&&t.callback():setTimeout(e=>{a<100?(a++,n.readyCheckAndCallback()):console.log("Error loading external resources.")},100)},generateAPI:e=>Object.keys(o).forEach(e=>this[e]=o[e])},o={addExternalScripts:e=>r(e),addExternalCSS:e=>l(e),addLocalStyles:e=>d(e),params:e=>t,state:e=>c,onReady:e=>y(e)};e.styles&&d(e.styles),e.scripts?r(e.scripts):c.scripts.ready=!0,e.stylesheets?l(e.stylesheets):c.css.ready=!0,n.generateAPI(),n.readyCheckAndCallback()}}